/*
 * main.c
 *
 *  Created on: 15 sept. 2025
 *      Author: hamed
 */


#include "xil_io.h"
#include "platform.h"
#include "xil_printf.h"
#include "xparameters.h"
#include "xuartps.h"

int main()
{
    init_platform();
    XUartPs_Config *Config;
    u8 ch;

    // Inicializar UART
    Config = XUartPs_LookupConfig(UART_DEVICE_ID);
    if (Config == NULL) {
        xil_printf("Error: no se encontró configuración del UART\r\n");
        return -1;
    }

    int Status = XUartPs_CfgInitialize(&Uart_Ps, Config, Config->BaseAddress);
    if (Status != XST_SUCCESS) {
        xil_printf("Error al inicializar UART\r\n");
        return -1;
    }

    XUartPs_SetBaudRate(&Uart_Ps, 57600); // Velocidad usada en tu terminal

    u64 ADRS ;
    u32 din = 0x00002020;
    ADRS = XPAR_BRAM_0_BASEADDR ;

    xil_printf("\n\r Hello From Zynq \n\r");
	Xil_Out32(ADRS, 0xF0F0F0F0);
    xil_printf("\n\r End of filling the BRAM \n\r");
    ADRS = XPAR_BRAM_0_BASEADDR ;
	din = Xil_In32(ADRS);
	xil_printf("Error at address  0x%08lx  ", din);
}
